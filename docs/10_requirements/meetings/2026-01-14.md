---
title: 2026-01-14
parent: 회의록
grand_parent: TR1L (Overview)
nav_order: 20260114
---

# 2026-01-14 개발 착수 전 설계 정렬: Dispatcher/Delivery 분리 및 인프라 운영 합의
## 1) 개요
- **날짜** : 2026-01-14
- **참여자** :


<!-- Participants -->
<div class="tr1l-participants" aria-label="participants">
  <a class="tr1l-chip" href="https://github.com/Jsnooopy" aria-label="이재 GitHub">
    <img class="tr1l-avatar" src="https://github.com/Jsnooopy.png?size=120" alt="이재" />
    <span class="tr1l-name">이재</span>
  </a>

  <a class="tr1l-chip" href="https://github.com/tkv00" aria-label="김도연 GitHub">
    <img class="tr1l-avatar" src="https://github.com/tkv00.png?size=120" alt="김도연" />
    <span class="tr1l-name">김도연</span>
  </a>

  <a class="tr1l-chip" href="https://github.com/ChoiSeungeon" aria-label="최승언 GitHub">
    <img class="tr1l-avatar" src="https://github.com/ChoiSeungeon.png?size=120" alt="최승언" />
    <span class="tr1l-name">최승언</span>
  </a>

  <a class="tr1l-chip" href="https://github.com/bon0512" aria-label="구본문 GitHub">
    <img class="tr1l-avatar" src="https://github.com/bon0512.png?size=120" alt="구본문" />
    <span class="tr1l-name">구본문</span>
  </a>

  <a class="tr1l-chip" href="https://github.com/marulog" aria-label="박준희 GitHub">
    <img class="tr1l-avatar" src="https://github.com/marulog.png?size=120" alt="박준희" />
    <span class="tr1l-name">박준희</span>
  </a>

  <a class="tr1l-chip" href="https://github.com/cylin0201" aria-label="김원기 GitHub">
    <img class="tr1l-avatar" src="https://github.com/cylin0201.png?size=120" alt="김원기" />
    <span class="tr1l-name">김원기</span>
  </a>
</div>

<style>
  .tr1l-participants{
    display:flex; flex-wrap:wrap; gap:10px;
    align-items:center; margin:8px 0 2px;
  }
  .tr1l-chip{
    display:inline-flex; align-items:center; gap:10px;
    padding:8px 12px; border-radius:999px;
    text-decoration:none !important;
    border:1px solid rgba(127,127,127,.28);
    background:rgba(127,127,127,.10);
    backdrop-filter:saturate(140%) blur(4px);
    transition:transform .12s ease, border-color .12s ease, background .12s ease;
  }
  .tr1l-chip:hover{
    transform:translateY(-1px);
    border-color:rgba(127,127,127,.45);
    background:rgba(127,127,127,.14);
  }
  .tr1l-avatar{
    width:28px; height:28px; border-radius:50%;
    display:block; flex:0 0 auto;
    box-shadow:0 0 0 1px rgba(127,127,127,.22);
  }
  .tr1l-name{
    font-weight:650; font-size:14px;
    line-height:1; letter-spacing:-0.2px;
    color:inherit;
  }
</style>

---

## 2) 목적(Goal) — 개발 착수 전 마지막 정렬
Dispatcher(Producer) / Delivery(Consumer) 분리 구조와 레포/의존성 세팅을 확정하고,  
멘토링용 README 피드백·질문 취합 프로세스와 인프라 운영 방식(**ECS/Fargate + EventBridge + Lag 기반 스케일링**)을 팀 공통 이해로 맞춘다.  
추가로 더미데이터(월 500만+ / 확장 시나리오) 생성 방향과 리스크(메모리/적재 방식)를 정리한다.

---

## 3) 회의 주제 / Agenda
|  Time | Topic        | Note                                                                          |
|------:|--------------|-------------------------------------------------------------------------------|
| 13:00 | 개발 착수 전 설계 검 | Kafka 앱 분리 & 레포 구조/의존성 세팅 / 스케줄링(EventBridge) / 모니터링·스케일링 이해 / 더미데이터 생성·적재 전략 |

---

## 4) 데일리 스크럼

### 4.1 진행 상황 공유
| 이름  | 진행 상황                      |
|-----|----------------------------|
| 이재  | 인프라 설계 수정 완료, 리드미 초안 작성 완료 |
| 김도연 | 배치 Job 1 설계 진행 중           |
| 구본문 | 배치 Job 1 설계 진행 중           |
| 박준희 | 배치 Job 1 설계 진행 중           |
| 김원기 | 카프카 설계, 확정                 |
| 최승언 | 카프카 설계, 확정                 |

### 4.2 계획 공유
| 이름  | 해야 할 일                       |
|-----|------------------------------|
| 이재  | 리드미 수정, 인프라 실구축              |
| 김도연 | 예외 처리 메세지 통일, Logback 커스트마이징 |
| 구본문 | 배치 JOB1 설계 완료 후 개발 착수        |
| 박준희 | 배치 개발 시작                     |
| 김원기 | 프로듀서 개발 시작, 설계 지속 파악         |
| 최승언 | 컨슈머 개발 시작                    |

---

## 5) 회의 내용(Notes)

### 5.1 Kafka 앱 분리: Dispatcher(Producer) / Delivery(Consumer) 구조 확정
- Kafka는 **브로커(인프라) 1개**, 애플리케이션을 역할로 분리한다.
  - **Dispatcher**: 발송 이벤트 발행(Producer)
  - **Delivery**: 발송 수행(Consumer)
- “Kafka를 두 개 쓰는가?” 논의가 있었으나,
  - Kafka 인프라는 하나, **앱(서비스)만 분리해서 띄우는 것**으로 정리.
- 디렉토리 구조는 기존 레포 구조를 따라가되,
  - Delivery는 “발송만 하는 애” 성격이라 DDD 적용 강도는 낮을 수 있음
  - 다만 초기에는 기존 구조를 복붙해 시작하고 개발하면서 정리

---

### 5.2 개발 착수 조건: 의존성/세팅 작업 우선 처리
- “레포 구조가 익숙하지 않다” → 기존 문서(Project Structure) 참고하도록 안내
- 분리 작업은 Gradle 의존성/모듈 구조가 걸리므로
  - **김도연이 우선 세팅**하고, 이후 Kafka 파트가 바로 개발할 수 있게 한다는 흐름으로 정리
- 목표: 퇴근 전까지 세팅 PR 올릴 수 있는 수준(또는 설계 확정 직후 30분 내 처리)

---

### 5.3 README(멘토링용) 방향: 길이 축소 & 링크 중심
- README가 길어 “한 번에 다 보기 어렵다”는 피드백
- 방향성:
  - **목차 + 핵심 요약 + 상세는 Confluence 링크**
  - 다이어그램은 “전체 1장 + 확대해서 보는 방식” 전제
- 팀원들은 각자 파트 문서를 보면서 아래를 이재에게 피드백하기로 함:
  - 가독성 떨어지는 부분
  - 빼도 되는 과한 부분
  - 멘토가 먼저 알아야 하는 핵심

---

### 5.4 스케줄링: EventBridge Scheduler 채택
- 2시간 단위 트리거(주기 발송)는 **AWS EventBridge Scheduler**가 담당
- Spring 내부 스케줄러로 상시 실행하면
  - “스케줄러 서버가 계속 켜져 있어야 해서” ECS/Fargate 방향과 어긋남
- 결론:
  - **EventBridge → ECS Task/Service 기동** 구조로 간다
- 파생 이슈:
  - “예약 발송” 용어가 애매함
  - 기본적으로 스케줄 기반이므로 “예약”을 스케줄로 설명 가능
  - 다만 “관리자가 특정 시각(예: 8시)에 정확히 보내고 싶다”가 요구사항인지 불명
    - → 멘토링 질문으로 확정

---

### 5.5 인프라 운영 방식 정렬: ‘서버를 소유’가 아니라 ‘필요 만큼 빌려쓴다’
- ECS/Fargate는 EC2처럼 “서버를 켜놓고 운영”이 아니라
  - 필요할 때 Task를 띄우고, 필요 없으면 줄이거나 종료
  - 스케일아웃도 “서버 증설”이 아니라 원하는 개수만 설정하면 AWS가 늘려줌
- 배치/프로듀서/컨슈머는 같은 ECS 클러스터에서 관리하되
  - **서비스/태스크로 분리**하여 운영
- “배치가 리소스를 많이 쓰면 컨슈머/프로듀서가 죽나?” 우려가 있었고
  - 서비스/태스크 단위 리소스 분리로 **격리**한다는 방향으로 설명을 맞춤

---

### 5.6 모니터링/오토스케일: ‘로그’가 아니라 ‘Lag 지표 기반’이 핵심
- 팀 내에서 “CloudWatch가 로그를 모아서 뭐 하는가?”로 혼동이 있었음
- 이재 설명 요지:
  - 다이어그램 화살표는 “로그 수집”이 아니라
  - **Kafka Lag → CloudWatch Metric(가공/지표화) → Consumer Auto Scaling** 흐름을 표현한 것
- Prometheus/Grafana/Loki/InfluxDB 등 스택 논의는 있었으나
  - 모니터링 파트는 아직 상세 설계/학습 전 → 추가 조사 후 결정
- 다이어그램 수정 필요:
  - 화살표 기준(요청 흐름/데이터 흐름)을 통일해야 “무한 화살표” 문제가 줄어듦

---

### 4.7 더미 데이터(월 500만+): 생성/적재 리스크와 분할 전략
- 월 500만 건 규모 전제에서, 한 번에 대량 적재 시 로컬 환경(8GB RAM 등) 메모리 한계 사례 언급
- 해결 방향:
  - **CSV 분할(예: 천만 단위 × 여러 파일)** 후 단계적 적재
  - 월 단위 조회 특성이 강하면 파티셔닝 전략이 유리할 수 있음
- 데이터 분포 논의:
  - 기본 항목이 적어 선택값 랜덤이 과해질 수 있음
  - 전월/전전월 포함해 1년치 데이터로 확장하면 규모 확보가 쉬움
- 실행 아이디어:
  - IntelliJ DB Tool을 통해 스키마 DDL을 뽑아 공유하면 데이터 생성 규칙 설계가 빨라짐
- 결론:
  - 더미데이터는 “한 번에 몰아넣기” 금지
  - 분할 CSV 적재 + 생성 규칙 가이드 문서화 필요

---

### 5.8 시크릿/환경변수 관리: 오버스펙 피하기
- “시크릿 관리 서버(Vault 등) 띄우는가?” 논의가 있었으나 현재 단계에서는 오버스펙
- 결론:
  - GitHub Secrets 중심
  - 필요 시 AWS SSM/Secrets Manager 정도를 검토

---

## 6) 조치 항목(Action Items)
- [ ] Dispatcher/Delivery 분리 세팅 PR (gradle/모듈/의존성)
- [ ] README 초안 피드백 전달 (수정/추가/삭제 포인트)
- [ ] 멘토링 질문 리스트 작성 후 전달 (1/15 오전 마감)
- [ ] 더미데이터 생성 규칙/분포 가이드 간단 문서화 + CSV 분할 적재 방식 정리
